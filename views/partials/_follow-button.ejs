<div class="follow-action-partial">
  <% if (user) { %>
    <div class="follow-container"
         data-movie-id="<%= movie.id %>"
         data-title="<%= movie.title %>"
         data-release-date="<%= movie.displayDate %>"
         data-poster-path="<%= movie.poster_path %>">

      <% if (followedMovieIds && followedMovieIds.includes(Number(movie.id))) { %>
        <!-- Following Button (shows as Following, hover to Unfollow) -->
        <form action="/unfollow/<%= movie.id %>" method="POST">
          <button type="submit" class="following-button" title="Click to unfollow this movie">
            <span class="following-text">Following âœ“</span>
            <span class="unfollow-text">Ã— Unfollow</span>
          </button>
        </form>
      <% } else { %>
        <!-- Follow Button -->
        <form action="/follow/<%= movie.id %>" method="POST">
          <button type="submit" 
            class="follow-button" 
            <%= movie.canFollow ? 'title="Click to follow this movie"' : 'disabled title="Released"' %>>
            Follow
          </button>
        </form>
      <% } %>

      <!-- Follow Options Panel (hidden by default, can be shown via JS) -->
      <div class="follow-options-panel" aria-hidden="true">
        <button class="follow-type-btn" data-type="theatrical" title="Theatrical Release (cinema only)" aria-label="Follow theatrical release">ðŸŽ­</button>
        <button class="follow-type-btn" data-type="streaming" title="Streaming Release (digital/streaming)" aria-label="Follow streaming release">ðŸ“º</button>
        <button class="follow-type-btn" data-type="both" title="Both Releases (theatrical + streaming)" aria-label="Follow both releases">ðŸŽ¬</button>
      </div>
    </div>
  <% } else { %>
    <!-- Login to follow -->
    <a class="login-to-follow" 
       href="/auth/login?redirect=<%= encodeURIComponent(loginRedirect) %>">
      Login
    </a>
  <% } %>
</div>