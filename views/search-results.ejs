<section class="results-header">
  <p>Results for "<%= query %>"</p>
</section>

<% if (followMessage) { %>
<p class="follow-msg"><%= followMessage %></p>
<% } %> <% if ((movies || []).length > 0) { %>
<div class="grid-container">
  <div class="results-grid">
    <% movies.forEach(movie => { %>
    <div class="movie-card">
      <a href="/movie/<%= movie.id %>" class="movie-link">
        <img
          src="<%= movie.poster_path ? 'https://image.tmdb.org/t/p/w300' + movie.poster_path : '/images/funny-fallback.png' %>"
          alt="<%= movie.title %>"
          class="<%= movie.poster_path ? 'movie-poster' : 'movie-poster fallback' %>"
        />
      </a>
      <h3><%= movie.title %></h3>
      <p><%= movie.displayDate %></p>
      <%- include('partials/_follow-button', { user, movie, followedMovieIds,
      query: query || '' }) %>
    </div>
    <% }); %>
  </div>
</div>

<!-- Pagination -->
<% if (totalPages > 1) { %>
<div class="pagination">
  <% if (currentPage > 1) { %>
  <a
    href="/search?query=<%= encodeURIComponent(query) %>&page=<%= currentPage - 1 %>"
    class="pagination-btn"
    >← Previous</a
  >
  <% } %>

  <span class="pagination-info"
    >Page <%= currentPage %> of <%= totalPages %></span
  >

  <% if (currentPage < totalPages) { %>
  <a
    href="/search?query=<%= encodeURIComponent(query) %>&page=<%= currentPage + 1 %>"
    class="pagination-btn"
    >Next →</a
  >
  <% } %>
</div>
<% } %> <% } else if (query) { %>
<p style="text-align: center">No results found for "<%= query %>".</p>
<% } %>
